{% extends 'base.html' %}
{% block body_block %}
  {% if currentArticle %}
    <form id = "article_form" method="post" action="/article/{{currentArticle.id}}/edit" enctype="multipart/form-data">
  {% else %}
    <form id = "article_form" method="post" action="/newarticle" enctype="multipart/form-data">
  {% endif %}
  {% csrf_token %}
  <div>
    <label for="title">Title</label>
    <input id="title" type="text" name="title" maxlength="128" value="{{currentArticle.title}}">
  <br/>
  <p><label for="abstract">Abstract : </label></p>
  <textarea id="newAbstract" type="text" name="abstract" cols ="100" rows="10">{{currentArticle.abstract}} </textarea>
  <br/>
  <p><label for='contentLtx'>Content : </label></p>
  <textarea id="contentLtx" type="text" name="contentLtx" cols ="100" rows="30">{{currentArticle.contentLtx}} </textarea>
  <br/>
  <button type="submit" class="btn btn-default">Save</button>
  </div>
</form>
<form action="https://www.overleaf.com/docs?engine=xelatex" method="post" target="_blank">
<textarea id="snip" style="display:none;" name="snip" rows="10" cols="60">{{currentArticle.contentLtx}} </textarea>
  <button type="submit" class="btn btn-default">Open in Overleaf</button>
</form> 
<script>
    $("#contentLtx").change(function() {
        $("#snip").text($("#contentLtx").val());
    });
</script>
{% endblock %}
